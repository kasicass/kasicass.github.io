
<html>
<head>
<meta charset="utf-8">
</head>
<body><h1>Benchmark - go vs python vs pypy</h1>
<p>看了<a href="http://karlheinzniebuhr.github.io/en/2015/09/28/C-vs-Go-vs-pypy-vs-Python/">这篇benchmark</a>，打算自己也测试下。</p>
<p>我测试中，C版本在range变大的情况下，果然是 constant time，估计和文中C/C++编译器的优化有关。</p>
<p>我主要对比下 go 和 pypy 的性能。</p>
<p>编译器版本</p>
<p>```
openbsd 6.3 virtualbox</p>
<p>go-1.10
python2.7
PyPy 5.3.1(python2.7)
```</p>
<p>go代码</p>
<p>```go
// go-sum.go
package main</p>
<p>import "fmt"</p>
<p>func main() {
        sum := 0
        for i := 0; i &lt; 50000000; i++ {
                sum += i
        }
        fmt.Println(sum)
}
```</p>
<p>python代码</p>
<p>```python</p>
<h1>py-sum.py</h1>
<p>result = 0
for a in xrange(50000000):
        result += a
print result
```</p>
<p>运行结果</p>
<p>```
$ time ./go-sum
1249999975000000
    0m00.03s real
    0m00.03s user
    0m00.01s system</p>
<p>$ time python py-sum.py
1249999975000000
    0m04.06s real
    0m04.03s user
    0m00.03s system</p>
<p>$ time pypy py-sum.py
1249999975000000
    0m02.92s real
    0m00.15s user
    0m01.04s system</p>
<p>$ time pypy py-sum.py 
1249999975000000
    0m00.21s real
    0m00.15s user
    0m00.05s system</p>
<p>$ time pypy py-sum.py 
1249999975000000
    0m00.20s real
    0m00.11s user
    0m00.07s system
```</p>
<p>pypy 第一次运行会做 JIT，所以会慢一些。之后再运行，速度就快起来了。</p>
<p>go 和 pypy 速度，大约在 1:5。</p>
</body>
</html>
