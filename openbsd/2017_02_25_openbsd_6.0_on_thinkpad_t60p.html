
<html>
<head>
<meta charset="utf-8">
</head>
<body><h1>跑在 Thinkpad T60p 上的'肥刺鱼'</h1>
<p>一眨眼，OpenBSD 6.0 都出来了。距上一次玩 OpenBSD 估计也是五、六年前的事情。</p>
<p><img alt="" src="2017_02_25_openbsd_6.0_on_thinkpad_t60p_image_01.png" /></p>
<p>最近脑抽，花了 580 大洋淘了台 T60，到货一看，居然是 T60p，=_= 当年的顶配神机，值了～</p>
<p><img alt="" src="2017_02_25_openbsd_6.0_on_thinkpad_t60p_image_02.png" /></p>
<p>（左边那排书是我放上去衬托画面的，其实好几年都没看过了 =_=!）</p>
<p>折腾了半天，给我的 T60p 装上 OpenBSD 6.0，记录下安装过程，备忘。</p>
<p>OpenBSD FAQ 就是 handbook。
<a href="http://www.openbsd.org/faq/index.html">http://www.openbsd.org/faq/index.html</a></p>
<p>Ctrl + Alt + F1~F6，默认的六个 console。</p>
<p>==== 安装 OpenBSD ====</p>
<p>将 <a href="https://mirrors.evowise.com/pub/OpenBSD/6.0/i386/install60.fs">install60.fs</a> 刻录到U盘</p>
<ul>
<li><a href="https://mirrors.evowise.com/pub/OpenBSD/6.0/i386/install60.fs">https://mirrors.evowise.com/pub/OpenBSD/6.0/i386/install60.fs</a></li>
<li>windows 下，用 <a href="https://sourceforge.net/projects/win32diskimager/">https://sourceforge.net/projects/win32diskimager/</a></li>
<li>openbsd 下，参见 <a href="http://www.openbsd.org/faq/faq4.html#MkInsMedia">http://www.openbsd.org/faq/faq4.html#MkInsMedia</a></li>
</ul>
<p>安装步骤</p>
<ul>
<li>修改 BIOS，用 USB-HDD 启动。</li>
<li>一路 Next 下来。</li>
<li>记得在安装 distribution sets 时，选择 disk，然后选择 sd1，作为安装媒介。</li>
</ul>
<p>==== 安装 firmware ====</p>
<p>装好 OpenBSD 6.0，启动时会提示缺少 radeon xxx firmware。</p>
<p>而且查看有哪些无线网络
```</p>
<h1>ifconfig wpi0 scan</h1>
<p>```
也提示缺少 wpi fireware。这些是什么鬼？</p>
<p>原来是 license 的问题。OpenBSD 对许可证要求很严，不满足要求的 firmware 安装时就不带了。</p>
<p>需要自己从 <a href="http://firmware.openbsd.org/firmware/6.0/">http://firmware.openbsd.org/firmware/6.0/</a> 下载。</p>
<p>```
方法一：
  a) 插上有线网络
  b) fw_update -p http://firmware.openbsd.org/firmware/6.0/
方法二：
  a) 下载 firmware，用 U盘 复制到 openbsd 机器上
  b) fw_update -p /path/to/firmware
搞定。</p>
<p>参考 wpi, fw_update 的 manpage。
```</p>
<p>==== 无线网络配置 ====</p>
<p>ifconfig 看到无线网卡名叫 wpi0。然后
man wpi，看看如何配置。</p>
<p>```</p>
<h1>ifconfig wpi0 nwid YourNetworkName wpakey YourNetworkPassword</h1>
<h1>dhclient wpi0    # 我机器上有提示出错，但网络还是通了。</h1>
<p>```
搞定，网络通。</p>
<p>写配置文件 hostname.wpi0，下期机器启动，保证网络正常。
```</p>
<h1>cat /etc/hostname.wpi0</h1>
<p>nwid YourNetworkName
wpakey YourNetworkPassword
dhcp</p>
<h1>chmod o-r /etc/hostname.wpi0       # 去掉 other 的 read 权限，安全一点</h1>
<h1>reboot</h1>
<p>```</p>
<p>==== 安装完毕后，希望更新系统组件(distribution sets) ====</p>
<p>用安装盘启用，然后选择 Upgrade。参考：</p>
<p><a href="http://www.openbsd.org/faq/faq4.html#FilesNeeded">http://www.openbsd.org/faq/faq4.html#FilesNeeded</a></p>
</body>
</html>
